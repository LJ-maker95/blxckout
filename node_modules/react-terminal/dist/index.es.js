import{createContext as e,createElement as n,useEffect as o,useContext as t,useState as r,useRef as i,Fragment as l}from"react";import a from"prop-types";import{isMobile as c}from"react-device-detect";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var s=function(){return(s=Object.assign||function(e){for(var n,o=1,t=arguments.length;o<t;o++)for(var r in n=arguments[o])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};function u(e,n){var o,t,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,t&&(r=2&i[0]?t.return:i[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,i[1])).done)return r;switch(t=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,t=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(r=(r=l.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],t=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}!function(e,n){void 0===n&&(n={});var o=n.insertAt;if(e&&"undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===o&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}('@import url("https://fonts.googleapis.com/css?family=Source+Code+Pro&display=swap");\n#index_terminalContainer__3q4m3 {\n  --control-default-bg-color: #ccc;\n  --control-close-bg-color: #fc5b57;\n  --control-minimize-bg-color: #e5bf3c;\n  --control-maximize-bg-color: #57c038; }\n\n.index_controls__9z-dM {\n  text-align: left;\n  height: 26px;\n  position: relative;\n  top: 4px;\n  margin-left: 4px; }\n  .index_controls__9z-dM .index_consoleCtrl__PQnAL {\n    display: inline-block;\n    width: 13px;\n    height: 13px;\n    margin: 0 3px;\n    border-radius: 50%;\n    background: var(--control-default-bg-color); }\n  .index_controls__9z-dM .index_close__2o6CK {\n    background: var(--control-close-bg-color); }\n  .index_controls__9z-dM .index_minimize__E9mwB {\n    background: var(--control-minimize-bg-color); }\n  .index_controls__9z-dM .index_maximize__sbbYF {\n    background: var(--control-maximize-bg-color); }\n\n.index_editor__2tqRz {\n  text-align: left;\n  height: calc(100% - 46px);\n  padding: 10px 15px;\n  overflow-wrap: break-word;\n  overflow-y: scroll;\n  outline: none;\n  font-family: "Source Code Pro", monospace;\n  font-size: 18px;\n  line-height: 22px;\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px; }\n  .index_editor__2tqRz .index_mobileInput__jGtyc {\n    position: absolute;\n    top: -2000px;\n    left: -2000px; }\n  .index_editor__2tqRz .index_lineText__2Poex {\n    display: inline;\n    position: relative;\n    top: -1px;\n    margin-left: 8px; }\n  .index_editor__2tqRz .index_preWhiteSpace__3nCT2 {\n    white-space: pre-wrap; }\n  .index_editor__2tqRz .index_caret__MYxcn {\n    position: relative;\n    -webkit-animation: index_blink__RQDX- 0.75s ease-in-out infinite;\n    -moz-animation: index_blink__RQDX- 0.75s ease-in-out infinite;\n    -o-animation: index_blink__RQDX- 0.75s ease-in-out infinite;\n    -ms-animation: index_blink__RQDX- 0.75s ease-in-out infinite;\n    animation: index_blink__RQDX- 0.75s ease-in-out infinite; }\n    .index_editor__2tqRz .index_caret__MYxcn .index_caretAfter__2B8sk {\n      content: "";\n      position: absolute;\n      top: 2px;\n      width: 10px;\n      height: 22px;\n      z-index: 10; }\n\n@-moz-keyframes index_blink__RQDX- {\n  0% {\n    opacity: 0;\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n    filter: alpha(opacity=0); }\n  100% {\n    opacity: 1;\n    -ms-filter: none;\n    filter: none; } }\n\n@-webkit-keyframes index_blink__RQDX- {\n  0% {\n    opacity: 0;\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n    filter: alpha(opacity=0); }\n  100% {\n    opacity: 1;\n    -ms-filter: none;\n    filter: none; } }\n\n@-o-keyframes index_blink__RQDX- {\n  0% {\n    opacity: 0;\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n    filter: alpha(opacity=0); }\n  100% {\n    opacity: 1;\n    -ms-filter: none;\n    filter: none; } }\n\n@keyframes index_blink__RQDX- {\n  0% {\n    opacity: 0;\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n    filter: alpha(opacity=0); }\n  100% {\n    opacity: 1;\n    -ms-filter: none;\n    filter: none; } }\n  .index_editor__2tqRz a {\n    color: #1a87b5; }\n\n.index_curvedTop__3RecJ {\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px; }\n\n#index_terminalContainer__3q4m3 {\n  height: 100%; }\n\n.index_terminal__1dSq1 {\n  height: 100%;\n  width: 100%;\n  margin: auto;\n  border-radius: 5px; }\n');var m={terminalContainer:"index_terminalContainer__3q4m3",controls:"index_controls__9z-dM",consoleCtrl:"index_consoleCtrl__PQnAL",close:"index_close__2o6CK",minimize:"index_minimize__E9mwB",maximize:"index_maximize__sbbYF",editor:"index_editor__2tqRz",mobileInput:"index_mobileInput__jGtyc",lineText:"index_lineText__2Poex",preWhiteSpace:"index_preWhiteSpace__3nCT2",caret:"index_caret__MYxcn",blink:"index_blink__RQDX-",caretAfter:"index_caretAfter__2B8sk",curvedTop:"index_curvedTop__3RecJ",terminal:"index_terminal__1dSq1"},d=e(null),p=function(e){var o=e.children;return n(d.Provider,{value:m},o)},f={dark:{themeBGColor:"#022833",themeToolbarColor:"#131519",themeColor:"#839496",themePromptColor:"#a917a8"},light:{themeBGColor:"#fdf6e4",themeToolbarColor:"#d8d8d8",themeColor:"#333333",themePromptColor:"#a917a8"},dracula:{themeBGColor:"#272B36",themeToolbarColor:"#DBDBDB",themeColor:"#FFFEFC",themePromptColor:"#a917a8"},"material-dark":{themeBGColor:"#151515",themeToolbarColor:"#424242",themeColor:"#fff",themePromptColor:"#42A5F5"},"material-light":{themeBGColor:"#fafafa",themeToolbarColor:"#424242",themeColor:"#151515",themePromptColor:"#42A5F5"},"material-ocean":{themeBGColor:"#263238",themeToolbarColor:"#37474F",themeColor:"#fff",themePromptColor:"#C3D82C"},matrix:{themeBGColor:"#0D0208",themeToolbarColor:"#0D0208",themeColor:"#00FF41",themePromptColor:"#008F11"}},_=e(null),h=function(e){var o=e.children,t=s(s({},f),o.props.themes||{}),r=t[o.props.theme]||t.light;return n(_.Provider,{value:r},o)};function x(e){var o=t(d),r=e.controlButtonLabels,i=e.showControlButtons?r.map((function(e){return n("div",{key:e,className:o.consoleCtrl+" "+o[e]})})):null;return n("div",{className:o.controls},i)}var b=e(null),C=function(e,r,i,a,c,s,m){var p=t(b),f=p.bufferedContent,h=p.setBufferedContent,x=t(d),C=t(_);o((function(){if(e){var o,t,d,p,_;o=a,t=void 0,d=void 0,_=function(){var e,t,d,p,_,b,g,v;return u(this,(function(u){switch(u.label){case 0:return e=o.trim().split(" "),t=e[0],d=e.slice(1),p="","clear"===t?(h(""),c(""),r(!1),[2]):(_=n(l,null,f,n("span",{style:{color:C.themePromptColor}},i),n("span",{className:x.lineText+" "+x.preWhiteSpace},a),n("br",null)),h(_),c(""),o?(b=d.join(" "),t&&s[t]?"function"!=typeof(g=s[t])?[3,2]:[4,g(b)]:[3,4]):[3,7]);case 1:return p=u.sent(),[3,3];case 2:p=g,u.label=3;case 3:return[3,7];case 4:return"function"!=typeof m?[3,6]:[4,m(b)];case 5:return p=u.sent(),[3,7];case 6:p=m,u.label=7;case 7:return v=n(l,null,f,n("span",{style:{color:C.themePromptColor}},i),n("span",{className:x.lineText+" "+x.preWhiteSpace},a),p?n("span",null,n("br",null),p):null,n("br",null)),h(v),r(!1),[2]}}))},new((p=void 0)||(p=Promise))((function(e,n){function o(e){try{i(_.next(e))}catch(e){n(e)}}function r(e){try{i(_.throw(e))}catch(e){n(e)}}function i(n){n.done?e(n.value):new p((function(e){e(n.value)})).then(o,r)}i((_=_.apply(t,d||[])).next())}))}}),[e])},g=function(e,a,s,u,m,p){var f=t(d),h=t(_),x=t(b).appendCommandToHistory,g=i(null),v=r(""),y=v[0],w=v[1],k=r(!1),T=k[0],B=k[1];o((function(){c&&a&&g.current.focus()}),[a]),o((function(){T&&x(y)}),[T]);var z=c&&p?n("div",{className:f.mobileInput},n("input",{type:"text",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",value:y,onChange:function(e){return w(e.target.value)},ref:g})):null,P=T?n(l,null,z,n("div",{className:f.lineText},a&&e?n("span",{className:f.caret},n("span",{className:f.caretAfter,style:{background:h.themeColor}})):null)):n(l,null,z,n("span",{style:{color:h.themePromptColor}},s),n("div",{className:f.lineText},n("span",{className:f.preWhiteSpace},y),a&&e?n("span",{className:f.caret},n("span",{className:f.caretAfter,style:{background:h.themeColor}})):null));return function(e,n,r,i,l){var a=t(b),c=a.getPreviousCommand,s=a.getNextCommand,u=function(o){if(e&&l){o.preventDefault();var t=o.key;if("Enter"!==t){var a=null;a="Backspace"===t?n.slice(0,-1):"ArrowUp"===t?c():"ArrowDown"===t?s():t&&1===t.length?n+t:n,r(a),i(!1)}else i(!0)}};o((function(){return document.addEventListener("keydown",u),function(){document.removeEventListener("keydown",u)}}))}(a,y,w,B,p),C(T,B,s,y,w,u,m),P};function v(e){var r=i(null),l=t(d),a=t(_),c=t(b).bufferedContent;!function(e,n){o((function(){n.current.scrollTop=n.current.scrollHeight}),[e])}(c,r);var s=e.enableInput,u=e.caret,m=e.consoleFocused,p=e.prompt,f=e.commands,h=e.welcomeMessage,x=e.errorMessage,C=e.curvedTop,v=g(u,m,p,f,x,s);return n("div",{ref:r,className:l.editor+" "+(C?l.curvedTop:null),style:{background:a.themeBGColor}},h,c,v)}function y(e){var l,a,s,u,m=i(null),p=r(!c),f=p[0],h=p[1],b=t(d),C=t(_);l=m,a=f,s=h,u=function(e){l.current&&!l.current.contains(e.target)?s(!1):s(!c||!a)},o((function(){return document.addEventListener("mousedown",u),function(){document.removeEventListener("mousedown",u)}}));var g=e.caret,y=e.theme,w=e.showControlBar,k=e.showControlButtons,T=e.controlButtonLabels,B=e.prompt,z=e.commands,P=e.welcomeMessage,M=e.errorMessage,D=e.enableInput,R=w?n(x,{consoleFocused:f,showControlButtons:k,controlButtonLabels:T}):null,N=n(v,{caret:g,consoleFocused:f,prompt:B,commands:z,welcomeMessage:P,errorMessage:M,enableInput:D,curvedTop:!w});return n("div",{ref:m,id:b.terminalContainer,className:b["theme--"+y]},n("div",{className:""+b.terminal,style:{background:C.themeToolbarColor,color:C.themeColor}},R,N))}function w(e){var o=e.children;return n(p,null,n(h,null,o))}function k(e){return n(w,null,n(y,s({},e)))}y.propTypes={enableInput:a.bool,caret:a.bool,theme:a.string,showControlBar:a.bool,showControlButtons:a.bool,controlButtonLabels:a.arrayOf(a.string),prompt:a.string,commands:a.objectOf(a.oneOfType([a.string,a.func,a.node])),welcomeMessage:a.oneOfType([a.string,a.func,a.node]),errorMessage:a.oneOfType([a.string,a.object])},y.defaultProps={enableInput:!0,caret:!0,theme:"light",showControlBar:!0,showControlButtons:!0,controlButtonLabels:["close","minimize","maximize"],prompt:">>>",commands:{},welcomeMessage:"",errorMessage:"not found!"};var T=function(e){var t=e.children,i=r(""),l=i[0],a=i[1],c=r([]),s=c[0],u=c[1],m=r(null),d=m[0],p=m[1];o((function(){p(s.length)}),[s]);return n(b.Provider,{value:{bufferedContent:l,setBufferedContent:a,appendCommandToHistory:function(e){e&&u(s.concat(e))},getPreviousCommand:function(){if(0===d)return 0===s.length?"":s[0];var e=s[d-1];return d>0&&p(d-1),e},getNextCommand:function(){if(d+1<=s.length){if(d===s.length)return"";var e=s[d+1];return p(d+1),e}return""}}},t)},B={ReactTerminal:k,TerminalContextProvider:T};export default B;export{k as ReactTerminal,T as TerminalContextProvider};
